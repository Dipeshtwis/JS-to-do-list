(()=>{const e=document.querySelector("[data-projects]"),t=document.querySelector("[data-new-project-form]"),o=document.querySelector("[data-new-project-input]"),n=document.querySelector("[data-delete-project-button]"),a=document.querySelector("[data-project-dsplay-container]"),d=document.querySelector("[data-project-title]"),r=document.querySelector("[data-todos]"),l=document.getElementById("todo-template"),c=document.querySelector("[data-new-todo-form]"),i=document.querySelector("[data-new-todo-title-input]"),u="todos.projects",s="todos.selectedProjectId";let m=JSON.parse(localStorage.getItem(u))||[],p=localStorage.getItem(s);function f(){localStorage.setItem(u,JSON.stringify(m)),localStorage.setItem(s,p),S()}function S(){y(e),m.forEach((t=>{const o=document.createElement("li");o.dataset.projectId=t.id,o.classList.add("project-name"),o.innerText=t.name,t.id===p&&o.classList.add("active-project"),e.appendChild(o)}));const t=m.find((e=>e.id===p));null==p?a.style.display="none":(a.style.display="",d.innerText=t.name,y(r),function(e){e.todos.forEach((e=>{const t=document.importNode(l.content,!0),o=t.querySelector("label");o.htmlFor=e.id,o.append(e.name),r.appendChild(t)}))}(t))}function y(e){for(;e.firstChild;)e.removeChild(e.firstChild)}e.addEventListener("click",(e=>{"li"===e.target.tagName.toLowerCase()&&(p=e.target.dataset.projectId,f())})),n.addEventListener("click",(e=>{m=m.filter((e=>e.id!==p)),p=null,f()})),t.addEventListener("submit",(e=>{e.preventDefault();const t=o.value;if(null==t||""===t)return;const n=(a=t,{id:Date.now().toString(),name:a,todos:[]});var a;o.value=null,m.push(n),f()})),c.addEventListener("submit",(e=>{e.preventDefault();const t=i.value;if(null==t||""===t)return;const o=(n=t,{id:Date.now().toString(),name:n});var n;i.value=null,m.find((e=>e.id===p)).todos.push(o),f()})),S()})();