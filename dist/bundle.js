(()=>{const e=document.querySelector("[data-projects]"),t=document.querySelector("[data-new-project-form]"),o=document.querySelector("[data-new-project-input]"),d=document.querySelector("[data-delete-project-button]"),n=document.querySelector("[data-delete-todo-button]"),a=document.querySelector("[data-project-dsplay-container]"),r=document.querySelector("[data-project-title]"),c=document.querySelector("[data-todos]"),i=document.getElementById("todo-template"),l=document.querySelector("[data-new-todo-form]"),u=document.querySelector("[data-new-todo-title-input]"),s=document.querySelector("[data-new-todo-desc-input]"),p=document.querySelector("[data-new-todo-prior-input]"),m=document.querySelector("[data-new-todo-date-input]"),S=document.querySelector("[data-new-todo-time-input]"),f=document.querySelector("[data-new-todo-note-input]"),y=document.querySelector("[data-todo-desc]"),v=document.querySelector("[data-desc]"),g="todos.projects",q="todos.selectedProjectId";let w=JSON.parse(localStorage.getItem(g))||[],h=localStorage.getItem(q);function j(){L(),E()}function L(){localStorage.setItem(g,JSON.stringify(w)),localStorage.setItem(q,h)}function E(){C(e),w.forEach((t=>{const o=document.createElement("li");o.dataset.projectId=t.id,o.classList.add("project-name"),o.innerText=t.name,t.id===h&&o.classList.add("active-project"),e.appendChild(o)}));const t=w.find((e=>e.id===h));null==h?a.style.display="none":(a.style.display="",r.innerText=t.name,C(c),function(e){e.todos.forEach((e=>{const t=document.importNode(i.content,!0),o=t.querySelector("input");o.id=e.id,o.checked=e.complete;const d=t.querySelector("ul");d.id=e.id,d.append(e.name),c.appendChild(t)}))}(t))}function C(e){for(;e.firstChild;)e.removeChild(e.firstChild)}c.addEventListener("click",(e=>{var t;"input"===e.target.tagName.toLowerCase()&&(w.find((e=>e.id===h)).todos.find((t=>t.id===e.target.id)).complete=e.target.checked,L()),"ul"===e.target.tagName.toLowerCase()&&(t=w.find((e=>e.id===h)).todos.find((t=>t.id===e.target.id)),C(v),v.append(t.name),v.append(t.desc),v.append(t.prior),v.append(t.date),v.append(t.time),v.append(t.note),y.appendChild(v))})),n.addEventListener("click",(e=>{const t=w.find((e=>e.id===h));t.todos=t.todos.filter((e=>!e.complete)),j()})),e.addEventListener("click",(e=>{"li"===e.target.tagName.toLowerCase()&&(h=e.target.dataset.projectId,j())})),d.addEventListener("click",(e=>{w=w.filter((e=>e.id!==h)),h=null,j()})),t.addEventListener("submit",(e=>{e.preventDefault();const t=o.value;if(null==t||""===t)return;const d=(n=t,{id:Date.now().toString(),name:n,todos:[]});var n;o.value=null,w.push(d),j()})),l.addEventListener("submit",(e=>{e.preventDefault();const t=u.value,o=s.value,d=p.value,n=m.value,a=S.value,r=f.value;if(null==t||""===t)return;const c=(i=t,y=o,v=d,g=n,q=a,L=r,{id:Date.now().toString(),name:i,desc:y,prior:v,date:g,time:q,note:L,complete:!1});var i,y,v,g,q,L;u.value=null,w.find((e=>e.id===h)).todos.push(c),j(),l.reset()})),E()})();