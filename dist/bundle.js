(()=>{const e=document.querySelector("[data-projects]"),t=document.querySelector("[data-new-project-form]"),o=document.querySelector("[data-new-project-input]"),n=document.querySelector("[data-delete-project-button]"),d=document.querySelector("[data-project-dsplay-container]"),a=document.querySelector("[data-project-title]"),r=document.querySelector("[data-todos]"),c=document.getElementById("todo-template"),l=document.querySelector("[data-new-todo-form]"),u=document.querySelector("[data-new-todo-title-input]"),i=(document.querySelector("[data-new-todo-desc-input]"),document.querySelector("[data-new-todo-prior-input]"),document.querySelector("[data-new-todo-date-input]"),document.querySelector("[data-new-todo-time-input]"),document.querySelector("[data-new-todo-note-input]"),"todos.projects"),s="todos.selectedProjectId";let m=JSON.parse(localStorage.getItem(i))||[],p=localStorage.getItem(s);function f(){localStorage.setItem(i,JSON.stringify(m)),localStorage.setItem(s,p),S()}function S(){y(e),m.forEach((t=>{const o=document.createElement("li");o.dataset.projectId=t.id,o.classList.add("project-name"),o.innerText=t.name,t.id===p&&o.classList.add("active-project"),e.appendChild(o)}));const t=m.find((e=>e.id===p));null==p?d.style.display="none":(d.style.display="",a.innerText=t.name,y(r),function(e){e.todos.forEach((e=>{const t=document.importNode(c.content,!0),o=t.querySelector("label");o.htmlFor=e.id,o.append(e.name),r.appendChild(t)}))}(t))}function y(e){for(;e.firstChild;)e.removeChild(e.firstChild)}e.addEventListener("click",(e=>{"li"===e.target.tagName.toLowerCase()&&(p=e.target.dataset.projectId,f())})),n.addEventListener("click",(e=>{m=m.filter((e=>e.id!==p)),p=null,f()})),t.addEventListener("submit",(e=>{e.preventDefault();const t=o.value;if(null==t||""===t)return;const n=(d=t,{id:Date.now().toString(),name:d,todos:[]});var d;o.value=null,m.push(n),f()})),l.addEventListener("submit",(e=>{e.preventDefault();const t=u.value;if(null==t||""===t)return;const o=(n=t,{id:Date.now().toString(),name:n,desc:undefined,prior:undefined,date:undefined,time:undefined,note:undefined});var n;u.value=null,m.find((e=>e.id===p)).todos.push(o),f()})),S()})();